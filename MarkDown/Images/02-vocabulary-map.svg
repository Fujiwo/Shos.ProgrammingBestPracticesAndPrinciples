<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800">
  <style>
    .title { font: 600 20px 'Noto Sans JP', Arial, sans-serif; fill:#222 }
    .label { font: 500 14px 'Noto Sans JP', Arial, sans-serif; fill:#111 }
    .box { fill:#fff; stroke:#333; stroke-width:1.5 }
    .domain { fill:#ffd699; stroke:#b36b00 }
    .klass { fill:#d0f0c0; stroke:#2e8b57 }
    .method { fill:#cfe2ff; stroke:#2255aa }
    .var { fill:#fff2b2; stroke:#a67c00 }
    .service { fill:#f8d7da; stroke:#a71d2a }
    .vocab { fill:#fff2cc; stroke:#996515 }
    .arrow { stroke:#666; stroke-width:2; fill:none; marker-end: url(#arrowhead) }
    .note { font: 400 12px 'Noto Sans JP', Arial, sans-serif; fill:#333 }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
    </marker>
  </defs>

  <text x="40" y="36" class="title">図2.3 語彙マップ — ドメイン語彙とコード要素の対応</text>

  <!-- Central Vocabulary -->
  <rect x="480" y="60" width="240" height="80" rx="8" ry="8" class="vocab box"/>
  <text x="600" y="105" text-anchor="middle" class="label">語彙 / Vocabulary</text>

  <!-- Top row concepts -->
  <rect x="80" y="200" width="200" height="80" rx="8" ry="8" class="domain box"/>
  <text x="180" y="245" text-anchor="middle" class="label">ドメイン用語
  <tspan x="180" dy="18" class="label">(Domain Terms)</tspan></text>

  <rect x="360" y="200" width="200" height="80" rx="8" ry="8" class="klass box"/>
  <text x="460" y="245" text-anchor="middle" class="label">型 / Classes</text>

  <rect x="640" y="200" width="200" height="80" rx="8" ry="8" class="method box"/>
  <text x="740" y="245" text-anchor="middle" class="label">振る舞い / Methods</text>

  <rect x="920" y="200" width="200" height="80" rx="8" ry="8" class="var box"/>
  <text x="1020" y="245" text-anchor="middle" class="label">変数・状態 / Variables</text>

  <rect x="520" y="320" width="240" height="80" rx="8" ry="8" class="service box"/>
  <text x="640" y="365" text-anchor="middle" class="label">サービス / Services (API)</text>

  <!-- arrows from central vocab -->
  <path d="M600 140 L180 200" class="arrow" />
  <path d="M600 140 L460 200" class="arrow" />
  <path d="M600 140 L740 200" class="arrow" />
  <path d="M600 160 L1020 200" class="arrow" />
  <path d="M600 140 L640 320" class="arrow" />

  <!-- examples boxes -->
  <rect x="300" y="420" width="160" height="60" rx="6" ry="6" class="klass box"/>
  <text x="380" y="450" text-anchor="middle" class="label">Customer
  <tspan x="380" dy="18" class="label">(顧客)</tspan></text>

  <rect x="520" y="420" width="160" height="60" rx="6" ry="6" class="klass box"/>
  <text x="600" y="450" text-anchor="middle" class="label">Order
  <tspan x="600" dy="18" class="label">(注文)</tspan></text>

  <rect x="720" y="420" width="160" height="60" rx="6" ry="6" class="method box"/>
  <text x="800" y="450" text-anchor="middle" class="label">PlaceOrder()
  <tspan x="800" dy="18" class="label">(注文を出す)</tspan></text>

  <rect x="920" y="420" width="160" height="60" rx="6" ry="6" class="method box"/>
  <text x="1000" y="450" text-anchor="middle" class="label">CalculateTotal()
  <tspan x="1000" dy="18" class="label">(合計を計算)</tspan></text>

  <rect x="80" y="520" width="180" height="60" rx="6" ry="6" class="var box"/>
  <text x="170" y="550" text-anchor="middle" class="label">pendingOrders
  <tspan x="170" dy="18" class="label">(保留注文)</tspan></text>

  <rect x="280" y="520" width="180" height="60" rx="6" ry="6" class="var box"/>
  <text x="370" y="550" text-anchor="middle" class="label">orderStatus
  <tspan x="370" dy="18" class="label">(注文状態)</tspan></text>

  <rect x="520" y="520" width="220" height="60" rx="6" ry="6" class="service box"/>
  <text x="630" y="550" text-anchor="middle" class="label">CustomerRepository
  <tspan x="630" dy="18" class="label">(顧客リポジトリ)</tspan></text>

  <rect x="780" y="520" width="220" height="60" rx="6" ry="6" class="service box"/>
  <text x="890" y="550" text-anchor="middle" class="label">EmailService
  <tspan x="890" dy="18" class="label">(メール配信)</tspan></text>

  <!-- example connections -->
  <path d="M380 420 L760 420" class="arrow" />
  <path d="M600 420 L920 420" class="arrow" />
  <path d="M600 480 L630 520" class="arrow" />

  <!-- Legend -->
  <rect x="40" y="660" width="1120" height="110" rx="8" ry="8" fill="#fff" stroke="#ccc"/>
  <text x="60" y="690" class="note">凡例:</text>
  <rect x="120" y="670" width="60" height="36" class="domain box"/>
  <text x="190" y="695" class="note">ドメイン用語</text>
  <rect x="300" y="670" width="60" height="36" class="klass box"/>
  <text x="370" y="695" class="note">型 / クラス</text>
  <rect x="460" y="670" width="60" height="36" class="method box"/>
  <text x="530" y="695" class="note">振る舞い / メソッド</text>
  <rect x="640" y="670" width="60" height="36" class="var box"/>
  <text x="710" y="695" class="note">変数 / 状態</text>
  <rect x="820" y="670" width="60" height="36" class="service box"/>
  <text x="890" y="695" class="note">サービス / API</text>

  <text x="60" y="735" class="note">注: 本図は例示であり、章本文の語彙リストに基づきカスタマイズすること。</text>
</svg>
