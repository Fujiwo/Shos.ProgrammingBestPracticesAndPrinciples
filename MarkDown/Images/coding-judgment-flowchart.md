# コーディング判断フローチャート

```mermaid
flowchart TD
    A[新しい機能/修正が必要] --> B{既存のコードを<br/>理解できるか？}
   
    B -->|No| C[コードの理解から開始]
    B -->|Yes| D{単一責務原則を<br/>満たしているか？}
   
    C --> C1[命名を確認]
    C1 --> C2[コメントを読む]
    C2 --> C3[テストコードを確認]
    C3 --> D
   
    D -->|No| E[責務を分離]
    D -->|Yes| F{適切な名前が<br/>付けられているか？}
   
    E --> E1[新しいクラス/メソッドを作成]
    E1 --> F
   
    F -->|No| G[名前を改善]
    F -->|Yes| H{テストは存在するか？}
   
    G --> G1[サービス指向名前付け<br/>SONを適用]
    G1 --> H
   
    H -->|No| I[テストを追加]
    H -->|Yes| J{パフォーマンスは<br/>許容範囲か？}
   
    I --> I1[テスト駆動開発<br/>TDDを実践]
    I1 --> J
   
    J -->|No| K[最適化を検討]
    J -->|Yes| L[実装開始]
   
    K --> K1{可読性を<br/>犠牲にするか？}
    K1 -->|Yes| K2[コメントで意図を説明]
    K1 -->|No| K3[可読性を保った最適化]
    K2 --> L
    K3 --> L
   
    L --> M[実装完了]
    M --> N{コードレビューを<br/>通過したか？}
   
    N -->|No| O[指摘事項を修正]
    N -->|Yes| P[完了]
   
    O --> O1[レビューコメントを理解]
    O1 --> O2[修正方針を決定]
    O2 --> F
   
    style A fill:#e3f2fd
    style P fill:#e8f5e8
    style C fill:#fff3e0
    style E fill:#fff3e0
    style G fill:#fff3e0
    style I fill:#fff3e0
    style K fill:#fff3e0
    style O fill:#ffebee
```

## 判断基準とチェックポイント

### 1. コード理解フェーズ
- **命名確認**: 変数、メソッド、クラス名が意図を表現しているか
- **コメント確認**: Whyが書かれているか（Howではなく）
- **テスト確認**: 期待動作を理解できるか

### 2. 設計原則チェック
| 原則 | チェック項目 | 対策 |
|------|-------------|------|
| **単一責務** | 1つのことだけをしているか | クラス/メソッドの分離 |
| **命名適切性** | 意図が伝わる名前か | SON原則の適用 |
| **テスト可能性** | テストしやすいか | 依存性の注入、モック化 |

### 3. 品質判断基準
```
1. 意図の表現度 (美しいコードの第一原則)
2. 単一責務度 (美しいコードの第二原則) 
3. 命名適切度 (美しいコードの第三原則)
4. 重複排除度 (Once And Only Once)
5. 抽象度統一 (メソッド記述の適切性)
6. ルール統一度 (コーディング規約準拠)
7. テスト容易性 (Testable設計)
```

### 4. パフォーマンス vs 可読性のトレードオフ判断
```
可読性優先 ← → パフォーマンス優先

一般的なケース: 可読性優先
クリティカルパス: パフォーマンス優先（コメントで補完）
```

### 5. レビュー対応指針
- **建設的**: 指摘の意図を理解する
- **学習機会**: 新しい知識を積極的に吸収
- **品質向上**: チーム全体の品質向上に貢献

---

*このフローチャートは第8章「実践的なコーディング手法」で学ぶ判断プロセスを可視化したものです。*