# SOLID原則の構造図

```
┌──────────────────────────────────────────────────────────────────────┐
│                            SOLID原則                                  │
├──────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  S - Single Responsibility Principle (単一責務原則)                   │
│  ┌────────────────────────────────────────────────────────────────┐  │
│  │ 「クラスが変更される理由は一つでなければならない」               │  │
│  │                                                                │  │
│  │ Before:                    After:                              │  │
│  │ ┌─────────────┐            ┌──────────┐ ┌──────────┐         │  │
│  │ │   Employee  │            │ Employee │ │Payroll   │         │  │
│  │ │ ─────────── │    →      │ (data)   │ │Calculator│         │  │
│  │ │ +calcPay()  │            └──────────┘ └──────────┘         │  │
│  │ │ +save()     │            ┌──────────┐ ┌──────────┐         │  │
│  │ │ +report()   │            │Employee  │ │Report    │         │  │
│  │ └─────────────┘            │Repository│ │Generator │         │  │
│  │                            └──────────┘ └──────────┘         │  │
│  └────────────────────────────────────────────────────────────────┘  │
│                                                                      │
│  O - Open/Closed Principle (開放閉鎖原則)                            │
│  ┌────────────────────────────────────────────────────────────────┐  │
│  │ 「拡張に対して開かれ、修正に対して閉じられている」               │  │
│  │                                                                │  │
│  │     ┌───────────┐                                              │  │
│  │     │  Shape    │  ←─── 抽象化により拡張可能                    │  │
│  │     │ ───────── │                                              │  │
│  │     │ +area()   │                                              │  │
│  │     └───────────┘                                              │  │
│  │           △                                                   │  │
│  │     ┌─────┴─────┐                                             │  │
│  │ ┌───────┐   ┌───────┐                                         │  │
│  │ │Circle │   │Square │  ←─── 新しい図形を追加                   │  │
│  │ └───────┘   └───────┘        しても既存コードは変更不要         │  │
│  └────────────────────────────────────────────────────────────────┘  │
│                                                                      │
│  L - Liskov Substitution Principle (リスコフ置換原則)               │
│  ┌────────────────────────────────────────────────────────────────┐  │
│  │ 「派生クラスは基底クラスと置き換え可能でなければならない」       │  │
│  │                                                                │  │
│  │ Rectangle rectangle = new Square();  // 正しく動作する          │  │
│  │ rectangle.setWidth(5);                                         │  │
│  │ rectangle.setHeight(4);                                        │  │
│  │ assert rectangle.getArea() == 20; // 期待通りの結果             │  │
│  └────────────────────────────────────────────────────────────────┘  │
│                                                                      │
│  I - Interface Segregation Principle (インターフェース分離原則)      │
│  ┌────────────────────────────────────────────────────────────────┐  │
│  │ 「クライアントは使用しないメソッドに依存を強制されるべきでない」 │  │
│  │                                                                │  │
│  │ Before:                    After:                              │  │
│  │ ┌─────────────┐            ┌─────────┐ ┌─────────┐             │  │
│  │ │  AllInOne   │            │Readable │ │Writable │             │  │
│  │ │ ─────────── │    →      │ ─────── │ │ ─────── │             │  │
│  │ │ +read()     │            │ +read() │ │ +write()│             │  │
│  │ │ +write()    │            └─────────┘ └─────────┘             │  │
│  │ │ +backup()   │            ┌─────────┐                        │  │
│  │ └─────────────┘            │Backupble│                        │  │
│  │                            │ ─────── │                        │  │
│  │                            │+backup()│                        │  │
│  │                            └─────────┘                        │  │
│  └────────────────────────────────────────────────────────────────┘  │
│                                                                      │
│  D - Dependency Inversion Principle (依存関係逆転原則)               │
│  ┌────────────────────────────────────────────────────────────────┐  │
│  │ 「上位モジュールは下位モジュールに依存してはならない」           │  │
│  │                                                                │  │
│  │ Before:                    After:                              │  │
│  │ ┌─────────────┐            ┌─────────────┐                     │  │
│  │ │   Service   │            │   Service   │                     │  │
│  │ │ ─────────── │            │ ─────────── │                     │  │
│  │ │ -database   │    →      │ -repository │                     │  │
│  │ │ +process()  │            │ +process()  │                     │  │
│  │ └─────────────┘            └─────────────┘                     │  │
│  │        │                          │                           │  │
│  │        ▼                          ▼                           │  │
│  │ ┌─────────────┐            ┌─────────────┐                     │  │
│  │ │  Database   │            │ IRepository │                     │  │
│  │ │(具体クラス) │            │ (抽象化)    │                     │  │
│  │ └─────────────┘            └─────────────┘                     │  │
│  │                                   △                           │  │
│  │                            ┌─────────────┐                     │  │
│  │                            │  Database   │                     │  │
│  │                            │ Repository  │                     │  │
│  │                            └─────────────┘                     │  │
│  └────────────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────────┘
```